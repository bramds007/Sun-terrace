map.on('load', () => {
  // 1) Vector tiles (MVT) van Gemeente Amsterdam
  map.addSource('horeca', {
    type: 'vector',
    url: 'https://api.data.amsterdam.nl/v1/mvt/horeca/tilejson.json'
  });

  // 2) Teken ALLES uit 'exploitatievergunning' (zonder filter)
  map.addLayer({
    id: 'terr-fill',
    type: 'fill',
    source: 'horeca',
    'source-layer': 'exploitatievergunning',
    paint: { 'fill-color': '#facc15', 'fill-opacity': 0.55 }
  });

  map.addLayer({
    id: 'terr-outline',
    type: 'line',
    source: 'horeca',
    'source-layer': 'exploitatievergunning',
    paint: { 'line-color': '#111', 'line-width': 1 }
  });

  map.addLayer({
    id: 'terr-label',
    type: 'symbol',
    source: 'horeca',
    'source-layer': 'exploitatievergunning',
    layout: {
      'text-field': ['coalesce',['get','zaaknaam'],['get','naam'],['get','bedrijfsnaam'],['literal','Terras']],
      'text-size': 11, 'text-offset': [0, 1.0], 'text-anchor': 'top'
    },
    paint: { 'text-halo-color': '#fff', 'text-halo-width': 1.2 }
  });

  // 3) Kleine check: tel zichtbare features en log het
  map.on('idle', () => {
    const f = map.queryRenderedFeatures({ layers: ['terr-fill'] });
    console.log('Zichtbare terrassen (MVT):', f.length);
  });
});